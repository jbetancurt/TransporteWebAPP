<form [formGroup]="FGAgregarPlantillas_Ofertas" (ngSubmit)="FGAgregarPlantillas_Ofertas.valid &&  enviarDatos()" #formulario>
    <ng-container >
        <mat-toolbar>
            <h1  mat-dialog-title>Agregar Plantilla Oferta</h1>
            <div class="menu-spacer"></div>
            
        </mat-toolbar>
        <mat-card>
            <mat-card-content>
                <div  fxLayout="row" fxLayoutGap="1px">
                    <mat-form-field appearance="fill" fxFlex>
                        <mat-label>Tipo De Plantilla: </mat-label>
                        <mat-select #SelectTipoPlantilla formControlName="idTipoDePlantillaOferta" (selectionChange)="encontrarEnumXIdTipoDePlantillaOferta($event.value)">
                            <mat-option *ngFor="let item of lstTiposDePlantillasOfertas" [value]="item.idTipoDePlantillaOferta">{{ item.nombreTipoDePlantillaOferta }}</mat-option>
                        </mat-select>
                    </mat-form-field>
                </div>
                <div  fxLayout="row" fxLayoutGap="1px">
                    <mat-form-field appearance="fill"  fxFlex>
                        <mat-label>Nombre Plantilla Oferta:</mat-label>
                        <input matInput  formControlName="nombrePlantillaOferta" [readonly]="false">
                    </mat-form-field>  
                </div>

                <app-panel-plantilla-origen-destino *ngIf="mostrarDatosLugares" [idEmpresa]="idEmpresaLogueado" [idOferta]="idOferta" [enumeradorTipoLugarXOferta]="'Origen'" [DatosParaCrearPlantillaOrigenPorOferta]="DatosParaCrearPlantillaOrigenPorOferta" (datosActualizadosLugares)="recibirOutputOrigenes($event)" (datosActualizadosParaBorrarLugares)="recibirOutputBorrarOrigenes($event)"></app-panel-plantilla-origen-destino>
                <br>
                <app-panel-plantilla-origen-destino *ngIf="mostrarDatosLugares" [idEmpresa]="idEmpresaLogueado" [idOferta]="idOferta" [enumeradorTipoLugarXOferta]="'Destino'" [DatosParaCrearPlantillaDestinoPorOferta]="DatosParaCrearPlantillaDestinoPorOferta" (datosActualizadosLugares)="recibirOutputDestinos($event)" (datosActualizadosParaBorrarLugares)="recibirOutputBorrarDestinos($event)"></app-panel-plantilla-origen-destino>
                <br>
                <app-panel-plantilla-vehiculos-ofertas *ngIf="mostrarDatosVehiculos" [idOferta]="idOferta" [DatosParaCrearPlantillaVehiculosPorOferta]="DatosParaCrearPlantillaVehiculosPorOferta" (datosActualizadosVehiculos)="recibirOutputVehiculos($event)" (datosActualizadosParaBorrarVehiculos)="recibirOutputBorrarVehiculos($event)"> </app-panel-plantilla-vehiculos-ofertas>
                <br>
                <app-panel-plantilla-cargas-ofertas *ngIf="mostrarDatosCarga" [idOferta]="idOferta" [DatosParaCrearPlantillaCargasPorOferta]="DatosParaCrearPlantillaCargasPorOferta" (datosActualizadosCargas)="recibirOutputCargas($event)" (datosActualizadosParaBorrarCargas)="recibirOutputBorrarCargas($event)"></app-panel-plantilla-cargas-ofertas>
                <br>
                <app-panel-plantilla-requisitos-ofertas *ngIf="mostrarDatosRequisitos" [idOferta]="idOferta" [DatosParaCrearPlantillaRequisitosPorOferta]="DatosParaCrearPlantillaRequisitosPorOferta" (datosActualizadosRequisitos)="recibirOutputRequisitos($event)" (datosActualizadosParaBorrarRequisitos)="recibirOutputBorrarRequisitos($event)"></app-panel-plantilla-requisitos-ofertas> 
                <br>
                

                <div *ngIf="mostrarDatosOferta">
                    <div  fxLayout="row" fxLayoutGap="1px">
                        <mat-form-field appearance="fill" fxFlex>
                            <mat-label>Tipo Orientacion De La Oferta: </mat-label>
                            <mat-select formControlName="idTipoOrientacionDeLaOferta"  >
                                <mat-option *ngFor="let item of lstTiposOrientacionesDeLaOferta" [value]="item.idTipoOrientacionDeLaOferta">{{ item.nombreTipoOrientacionDeLaOferta}}</mat-option>
                            </mat-select>
                        </mat-form-field>
                    </div>

                    

                    <div  fxLayout="row" fxLayoutGap="1px">
                        <mat-form-field appearance="fill"  fxFlex>
                            <mat-label>Titulo Oferta:</mat-label>
                            <input matInput  formControlName="tituloOferta" [readonly]="false">
                        </mat-form-field>  
                    </div>

                    <div  fxLayout="row" fxLayoutGap="1px">
                        <mat-form-field appearance="fill"  fxFlex>
                            <mat-label>Descripcion Oferta:</mat-label>
                            <input matInput  formControlName="descripcionOferta" [readonly]="false">
                        </mat-form-field>  
                    </div>

                    <div  fxLayout="row" fxLayoutGap="1px">
                        <mat-form-field appearance="fill"  fxFlex>
                            <mat-label>Valor Total Oferta:</mat-label>
                            <input matInput  formControlName="valorTotalDeLaOferta" [readonly]="false">
                        </mat-form-field>   
                    </div>

                    <input type="hidden" formControlName="idOferta" [readonly]="false">  
                </div>    
            </mat-card-content>    
            
            
            <mat-card-actions align="end">
                <button *ngIf="idOferta <= 0" mat-raised-button color="primary"   (submit)="enviarDatos()">
                    Agregar
                </button> 
                <button *ngIf="idOferta > 0" mat-raised-button color="primary" (submit)="enviarDatos()" >
                    Editar
                </button>
                <button mat-raised-button color="warn" mat-dialog-close>Cancel</button>
            </mat-card-actions>
            
        </mat-card>
    </ng-container>
</form>

